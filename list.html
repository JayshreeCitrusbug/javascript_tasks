<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/style.css" />
    <title>User Listing</title>
</head>
<body>
    <h1> Listing page</h1>
    <small id="no-data"></small>
    <div class="list-container">
    <table class="table table-striped">
        <thead>
            <tr>
                <th></th>
                <th><b>First Name</b></th>
                <th><b>Last Name</b></th>
                <th><b>Email</b></th>
                <th><b>Date of Birth</b></th>
                <th><b>Gender</b></th>
                <th><b>Hobby</b></th>
                <th><b>Technology</b></th>
                <th><b>View</b></th>
              </tr>
        </thead>

        <tbody id="tbody">
          
        </tbody>
      </table>
    </div>
    <script>
        function replaceFunction(){
            console.log("localStorage", localStorage)
            // var retrievedObject = JSON.parse(localStorage);
            var tbody = document.getElementById('tbody');
          
            for (var i = 1; i <= localStorage.length; i++) {
                var tr = "<tr>";
                tr += `<td></td>
                        <td> ${JSON.parse(localStorage[i]).fname} </td> 
                        <td> ${JSON.parse(localStorage[i]).lname} </td> 
                        <td> ${JSON.parse(localStorage[i]).email}</td> 
                        <td> ${JSON.parse(localStorage[i]).dob}</td>
                        <td> ${JSON.parse(localStorage[i]).gender}</td>
                        <td> ${JSON.parse(localStorage[i]).hobby}</td>
                        <td> ${JSON.parse(localStorage[i]).technology}</td>
                        <td> <button type="button" class="btn btn-primary" onclick="viewRow(${i})">View</button> </td>
            </tr>`;
                
                tbody.innerHTML += tr;
            }
        }

        function viewRow(rowId) {
            // Perform any action when the button is clicked, e.g., open a modal to edit the row data.
            console.log("Editing row with ID:", rowId);
            url = `http://127.0.0.1:5500/view.html?data=${(rowId)}`;
    
            document.location.href = url;
            // window.location.assign(`http://127.0.0.1:5500/view.html?data=${localStorage[rowId]}`);
            // console.log("local storage.",localStorage[rowId])
            return true
        }

        replaceFunction()
    </script>
</body>
</html>